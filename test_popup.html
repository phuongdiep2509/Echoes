<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Test Gift Popup</title>
    <link rel="stylesheet" href="assets/css/gift-popup.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #f0efeb;
            min-height: 200vh; /* T·∫°o scroll ƒë·ªÉ test */
        }
        .info { 
            background: white; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 20px 0; 
        }
        button { 
            padding: 10px 20px; 
            margin: 5px; 
            font-size: 16px; 
            border: none;
            border-radius: 5px;
            background: #74070d;
            color: white;
            cursor: pointer;
        }
        button:hover { opacity: 0.9; }
    </style>
</head>
<body>
    <div class="info">
        <h1>üéÅ Test Gift Popup</h1>
        <p>Trang n√†y ƒë·ªÉ test popup h·ªôp qu√†. M·ªü Console (F12) ƒë·ªÉ xem debug messages.</p>
        
        <button onclick="forceShowPopup()">üéÅ Force Show Popup</button>
        <button onclick="clearStorage()">üßπ Clear Storage</button>
        <button onclick="checkPopup()">üîç Check Popup Status</button>
        
        <div id="status" style="margin-top: 20px; padding: 10px; background: #f9f9f9; border-radius: 5px;">
            <strong>Status:</strong> ƒêang ki·ªÉm tra...
        </div>
    </div>

    <div class="info">
        <h2>Debug Info</h2>
        <p>Current page: <span id="currentPage"></span></p>
        <p>LocalStorage gift_popup_clicked: <span id="localStorage"></span></p>
        <p>Popup element exists: <span id="popupExists"></span></p>
    </div>

    <script src="scripts/gift-popup.js"></script>
    <script>
        // Update debug info
        function updateDebugInfo() {
            document.getElementById('currentPage').textContent = window.location.pathname.split('/').pop() || 'index.html';
            document.getElementById('localStorage').textContent = localStorage.getItem('gift_popup_clicked') || 'null';
            document.getElementById('popupExists').textContent = document.getElementById('giftPopup') ? 'YES' : 'NO';
        }

        function forceShowPopup() {
            console.log('Force showing popup...');
            const existingPopup = document.getElementById('giftPopup');
            if (existingPopup) {
                existingPopup.remove();
            }
            
            const giftPopup = new GiftPopup();
            giftPopup.createPopup();
            
            const popup = document.getElementById('giftPopup');
            if (popup) {
                popup.style.display = 'block';
                popup.style.opacity = '1';
                popup.style.transform = 'translateY(0)';
                document.getElementById('status').innerHTML = '<strong>Status:</strong> ‚úÖ Popup created and shown!';
            } else {
                document.getElementById('status').innerHTML = '<strong>Status:</strong> ‚ùå Failed to create popup!';
            }
            updateDebugInfo();
        }

        function clearStorage() {
            localStorage.removeItem('gift_popup_clicked');
            document.getElementById('status').innerHTML = '<strong>Status:</strong> üßπ Storage cleared!';
            updateDebugInfo();
        }

        function checkPopup() {
            const popup = document.getElementById('giftPopup');
            if (popup) {
                const styles = window.getComputedStyle(popup);
                document.getElementById('status').innerHTML = `
                    <strong>Status:</strong> üìä Popup found!<br>
                    Display: ${styles.display}<br>
                    Opacity: ${styles.opacity}<br>
                    Z-index: ${styles.zIndex}<br>
                    Position: ${styles.position}<br>
                    Bottom: ${styles.bottom}<br>
                    Right: ${styles.right}
                `;
            } else {
                document.getElementById('status').innerHTML = '<strong>Status:</strong> ‚ùå No popup found!';
            }
            updateDebugInfo();
        }

        // Auto update debug info every 2 seconds
        setInterval(updateDebugInfo, 2000);
        updateDebugInfo();
    </script>
</body>
</html>